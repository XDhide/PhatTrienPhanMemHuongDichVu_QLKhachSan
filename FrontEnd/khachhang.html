<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω Kh√°ch H√†ng - Kh√°ch S·∫°n</title>
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">üë•</div>
                <h1>Qu·∫£n L√Ω Kh√°ch H√†ng</h1>
            </div>
        </header>

        <nav>
            <ul class="nav-menu">
                <li><a href="index.html">üìä T·ªïng Quan</a></li>
                <li><a href="phong.html">üè† Qu·∫£n L√Ω Ph√≤ng</a></li>
                <li><a href="datphong.html">üìÖ ƒê·∫∑t Ph√≤ng</a></li>
                <li><a href="khachhang.html" class="active">üë• Kh√°ch H√†ng</a></li>
                <li><a href="hoadon.html">üí∞ H√≥a ƒê∆°n</a></li>
                <li><a href="dichvu.html">üõéÔ∏è D·ªãch V·ª•</a></li>
                <li><a href="baocao.html">üìà B√°o C√°o</a></li>
            </ul>
        </nav>

        <div class="content">
            <div class="stats">
                <div class="stat-card">
                    <h3>T·ªïng Kh√°ch H√†ng</h3>
                    <div class="number" id="totalCustomers">30</div>
                </div>
                <div class="stat-card">
                    <h3>Kh√°ch VIP</h3>
                    <div class="number">8</div>
                </div>
                <div class="stat-card">
                    <h3>Kh√°ch M·ªõi Th√°ng N√†y</h3>
                    <div class="number">5</div>
                </div>
            </div>

            <div class="toolbar">
                <input type="text" id="searchCustomer" placeholder="üîç T√¨m ki·∫øm theo t√™n, s·ªë ƒëi·ªán tho·∫°i, email..." style="flex: 1; max-width: 500px;">
                <button class="btn btn-primary" onclick="openAddModal()">+ Th√™m Kh√°ch H√†ng</button>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>M√£ KH</th>
                        <th>H·ªç T√™n</th>
                        <th>ƒêi·ªán Tho·∫°i</th>
                        <th>Email</th>
                        <th>CMND/CCCD</th>
                        <th>ƒê·ªãa Ch·ªâ</th>
                        <th>Thao T√°c</th>
                    </tr>
                </thead>
                <tbody id="customerList">
                    <!-- Data will be loaded here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal Th√™m/S·ª≠a Kh√°ch H√†ng -->
    <div id="customerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Th√™m Kh√°ch H√†ng M·ªõi</h2>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            <form id="customerForm">
                <div class="form-group">
                    <label>H·ªç T√™n <span class="required">*</span></label>
                    <input type="text" id="customerName" required placeholder="Nh·∫≠p h·ªç t√™n ƒë·∫ßy ƒë·ªß">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ƒêi·ªán Tho·∫°i <span class="required">*</span></label>
                        <input type="tel" id="phone" required placeholder="VD: 0901234567">
                    </div>

                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="email" placeholder="email@example.com">
                    </div>
                </div>

                <div class="form-group">
                    <label>CMND/CCCD <span class="required">*</span></label>
                    <input type="text" id="idCard" required placeholder="S·ªë ch·ª©ng minh nh√¢n d√¢n/CƒÉn c∆∞·ªõc">
                </div>

                <div class="form-group">
                    <label>ƒê·ªãa Ch·ªâ</label>
                    <textarea id="address" rows="3" placeholder="ƒê·ªãa ch·ªâ li√™n h·ªá"></textarea>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 25px;">
                    <button type="submit" class="btn btn-primary">üíæ L∆∞u</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">‚úñ H·ªßy</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let customers = [
            { id: 1, name: 'Phan VƒÉn Kh√°nh', phone: '0901234567', email: 'pvkhanh@gmail.com', idCard: '123456789012', address: '123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP.HCM' },
            { id: 2, name: 'V≈© Minh H√†o', phone: '0902345678', email: 'vmhao@gmail.com', idCard: '234567890123', address: '456 ƒê∆∞·ªùng DEF, Qu·∫≠n 2, TP.HCM' },
            { id: 3, name: 'L∆∞u Th·ªã Thanh Mai', phone: '0903456789', email: 'ltthanhmai@gmail.com', idCard: '345678901234', address: '789 ƒê∆∞·ªùng GHI, Qu·∫≠n 3, TP.HCM' },
            { id: 4, name: 'L√™ Ti·∫øn Linh', phone: '0904567890', email: 'ltlinh@gmail.com', idCard: '456789012345', address: '321 ƒê∆∞·ªùng JKL, Qu·∫≠n 4, TP.HCM' },
            { id: 5, name: 'Ph·∫°m Huy Anh', phone: '0905678901', email: 'phanh@gmail.com', idCard: '567890123456', address: '654 ƒê∆∞·ªùng MNO, Qu·∫≠n 5, TP.HCM' },
            { id: 6, name: 'Nguy·ªÖn VƒÉn Ph√∫c', phone: '0906789012', email: 'nvphuc@gmail.com', idCard: '678901234567', address: '987 ƒê∆∞·ªùng PQR, Qu·∫≠n 6, TP.HCM' },
            { id: 7, name: 'L√™ Huy Ho√†ng', phone: '0907890123', email: 'lhhoang@gmail.com', idCard: '789012345678', address: '147 ƒê∆∞·ªùng STU, Qu·∫≠n 7, TP.HCM' },
            { id: 8, name: 'ƒêinh Ng·ªçc ƒê·∫°i', phone: '0908901234', email: 'dndai@gmail.com', idCard: '890123456789', address: '258 ƒê∆∞·ªùng VWX, Qu·∫≠n 8, TP.HCM' },
            { id: 9, name: 'Ng√¥ Minh Nguy·ªát', phone: '0909012345', email: 'nmnguyet@gmail.com', idCard: '901234567890', address: '369 ƒê∆∞·ªùng YZ, Qu·∫≠n 9, TP.HCM' },
            { id: 10, name: 'Nguy·ªÖn VƒÉn D≈©ng', phone: '0910123456', email: 'nvdung@gmail.com', idCard: '012345678901', address: '159 ƒê∆∞·ªùng AB, Qu·∫≠n 10, TP.HCM' }
        ];

        let currentCustomerId = null;

        function loadCustomers() {
            const tbody = document.getElementById('customerList');
            const searchTerm = document.getElementById('searchCustomer').value.toLowerCase();

            let filteredCustomers = customers.filter(c => {
                return c.name.toLowerCase().includes(searchTerm) ||
                       c.phone.includes(searchTerm) ||
                       (c.email && c.email.toLowerCase().includes(searchTerm)) ||
                       c.idCard.includes(searchTerm);
            });

            tbody.innerHTML = '';
            filteredCustomers.forEach(c => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>KH${String(c.id).padStart(3, '0')}</strong></td>
                    <td>${c.name}</td>
                    <td>${c.phone}</td>
                    <td>${c.email || '-'}</td>
                    <td>${c.idCard}</td>
                    <td>${c.address || '-'}</td>
                    <td>
                        <button class="btn btn-success" onclick="viewCustomer(${c.id})" style="padding: 6px 12px; font-size: 12px;">‚úèÔ∏è S·ª≠a</button>
                        <button class="btn btn-danger" onclick="deleteCustomer(${c.id})" style="padding: 6px 12px; font-size: 12px;">üóëÔ∏è X√≥a</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            document.getElementById('totalCustomers').textContent = customers.length;
        }

        function openAddModal() {
            document.getElementById('modalTitle').textContent = 'Th√™m Kh√°ch H√†ng M·ªõi';
            document.getElementById('customerForm').reset();
            currentCustomerId = null;
            document.getElementById('customerModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('customerModal').classList.remove('active');
        }

        function viewCustomer(id) {
            const customer = customers.find(c => c.id === id);
            if (!customer) return;

            currentCustomerId = id;
            document.getElementById('modalTitle').textContent = 'S·ª≠a Th√¥ng Tin Kh√°ch H√†ng';
            document.getElementById('customerName').value = customer.name;
            document.getElementById('phone').value = customer.phone;
            document.getElementById('email').value = customer.email || '';
            document.getElementById('idCard').value = customer.idCard;
            document.getElementById('address').value = customer.address || '';
            document.getElementById('customerModal').classList.add('active');
        }

        function deleteCustomer(id) {
            if (!confirm('‚ö†Ô∏è B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a kh√°ch h√†ng n√†y?\n\nL∆∞u √Ω: C√°c ƒë·∫∑t ph√≤ng v√† h√≥a ƒë∆°n li√™n quan s·∫Ω b·ªã ·∫£nh h∆∞·ªüng.')) return;
            
            customers = customers.filter(c => c.id !== id);
            loadCustomers();
            alert('‚úÖ ƒê√£ x√≥a kh√°ch h√†ng th√†nh c√¥ng!');
        }

        document.getElementById('customerForm').onsubmit = function(e) {
            e.preventDefault();

            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const idCard = document.getElementById('idCard').value;
            const address = document.getElementById('address').value;

            // Validate phone
            if (!/^0\d{9}$/.test(phone)) {
                alert('‚ö†Ô∏è S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá! Vui l√≤ng nh·∫≠p 10 s·ªë, b·∫Øt ƒë·∫ßu b·∫±ng 0.');
                return;
            }

            // Validate email
            if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                alert('‚ö†Ô∏è Email kh√¥ng h·ª£p l·ªá!');
                return;
            }

            // Validate ID card
            if (!/^\d{9,12}$/.test(idCard)) {
                alert('‚ö†Ô∏è CMND/CCCD kh√¥ng h·ª£p l·ªá! Vui l√≤ng nh·∫≠p 9-12 ch·ªØ s·ªë.');
                return;
            }

            if (currentCustomerId) {
                // S·ª≠a
                const customer = customers.find(c => c.id === currentCustomerId);
                if (customer) {
                    customer.name = name;
                    customer.phone = phone;
                    customer.email = email;
                    customer.idCard = idCard;
                    customer.address = address;
                    alert('‚úÖ C·∫≠p nh·∫≠t th√¥ng tin kh√°ch h√†ng th√†nh c√¥ng!');
                }
            } else {
                // Th√™m m·ªõi
                const newCustomer = {
                    id: Math.max(...customers.map(c => c.id)) + 1,
                    name: name,
                    phone: phone,
                    email: email,
                    idCard: idCard,
                    address: address
                };
                customers.push(newCustomer);
                alert('‚úÖ Th√™m kh√°ch h√†ng m·ªõi th√†nh c√¥ng!');
            }

            closeModal();
            loadCustomers();
        };

        // Event listeners
        document.getElementById('searchCustomer').addEventListener('input', loadCustomers);

        // Initialize
        loadCustomers();
    </script>
</body>
</html>