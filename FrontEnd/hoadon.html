<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω H√≥a ƒê∆°n - Kh√°ch S·∫°n</title>
    <link rel="stylesheet" href="style.css">

    
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">üí∞</div>
                <h1>Qu·∫£n L√Ω H√≥a ƒê∆°n</h1>
            </div>
        </header>

        <nav>
            <ul class="nav-menu">
                <li><a href="index.html">üìä T·ªïng Quan</a></li>
                <li><a href="phong.html">üè† Qu·∫£n L√Ω Ph√≤ng</a></li>
                <li><a href="datphong.html">üìÖ ƒê·∫∑t Ph√≤ng</a></li>
                <li><a href="khachhang.html">üë• Kh√°ch H√†ng</a></li>
                <li><a href="hoadon.html" class="active">üí∞ H√≥a ƒê∆°n</a></li>
                <li><a href="dichvu.html">üõéÔ∏è D·ªãch V·ª•</a></li>
                <li><a href="baocao.html">üìà B√°o C√°o</a></li>
            </ul>
        </nav>

        <div class="content">
            <div class="stats">
                <div class="stat-card">
                    <h3>T·ªïng H√≥a ƒê∆°n</h3>
                    <div class="number" id="totalInvoices">17</div>
                </div>
                <div class="stat-card">
                    <h3>Doanh Thu Th√°ng</h3>
                    <div class="number">‚Ç´125M</div>
                </div>
                <div class="stat-card">
                    <h3>ƒê√£ Thanh To√°n</h3>
                    <div class="number">‚Ç´125M</div>
                </div>
                <div class="stat-card">
                    <h3>C√≤n N·ª£</h3>
                    <div class="number">‚Ç´0</div>
                </div>
            </div>

            <div class="toolbar">
                <div class="search-bar">
                    <input type="text" id="searchInvoice" placeholder="üîç T√¨m ki·∫øm s·ªë h√≥a ƒë∆°n, kh√°ch h√†ng...">
                    <input type="date" id="filterDateFrom">
                    <input type="date" id="filterDateTo">
                </div>
                <button class="btn btn-primary" onclick="alert('Ch·ª©c nƒÉng t·∫°o h√≥a ƒë∆°n m·ªõi')">+ T·∫°o H√≥a ƒê∆°n</button>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>S·ªë Hƒê</th>
                        <th>Kh√°ch H√†ng</th>
                        <th>Ng√†y L·∫≠p</th>
                        <th>T·ªïng Ti·ªÅn</th>
                        <th>ƒê√£ Tr·∫£</th>
                        <th>C√≤n N·ª£</th>
                        <th>H√¨nh Th·ª©c TT</th>
                        <th>Tr·∫°ng Th√°i</th>
                        <th>Thao T√°c</th>
                    </tr>
                </thead>
                <tbody id="invoiceList">
                    <!-- Data will be loaded here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal Chi Ti·∫øt H√≥a ƒê∆°n -->
    <div id="invoiceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Chi Ti·∫øt H√≥a ƒê∆°n <span id="invoiceNumber"></span></h2>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            
            <div class="invoice-info" id="invoiceInfo">
                <!-- Invoice info will be loaded here -->
            </div>

            <h3 style="margin-bottom: 15px; color: #333;">Chi Ti·∫øt D·ªãch V·ª•</h3>
            <table style="margin-top: 0;">
                <thead>
                    <tr>
                        <th>D·ªãch V·ª•</th>
                        <th>S·ªë L∆∞·ª£ng</th>
                        <th>ƒê∆°n Gi√°</th>
                        <th>Th√†nh Ti·ªÅn</th>
                    </tr>
                </thead>
                <tbody id="invoiceDetails">
                    <!-- Details will be loaded here -->
                </tbody>
            </table>

            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button class="btn btn-success" onclick="printInvoice()">üñ®Ô∏è In H√≥a ƒê∆°n</button>
                <button class="btn btn-info" onclick="closeModal()">‚úñ ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <script>
        const invoices = [
            { id: 1, code: 'HD001', customer: 'Phan VƒÉn Kh√°nh', date: '2024-09-03', total: 2350000, paid: 2350000, paymentMethod: 'Ti·ªÅn M·∫∑t' },
            { id: 2, code: 'HD002', customer: 'V≈© Minh H√†o', date: '2024-09-04', total: 3000000, paid: 3000000, paymentMethod: 'Th·∫ª' },
            { id: 3, code: 'HD003', customer: 'L∆∞u Th·ªã Thanh Mai', date: '2024-09-05', total: 4800000, paid: 4800000, paymentMethod: 'Chuy·ªÉn Kho·∫£n' },
            { id: 4, code: 'HD004', customer: 'L√™ Ti·∫øn Linh', date: '2024-09-07', total: 6400000, paid: 6400000, paymentMethod: 'Th·∫ª' },
            { id: 5, code: 'HD005', customer: 'Ph·∫°m Huy Anh', date: '2024-09-08', total: 9550000, paid: 9550000, paymentMethod: 'Chuy·ªÉn Kho·∫£n' },
            { id: 6, code: 'HD006', customer: 'Nguy·ªÖn VƒÉn Ph√∫c', date: '2024-09-09', total: 7500000, paid: 7500000, paymentMethod: 'Ti·ªÅn M·∫∑t' },
            { id: 7, code: 'HD007', customer: 'L√™ Huy Ho√†ng', date: '2024-09-10', total: 21400000, paid: 21400000, paymentMethod: 'Chuy·ªÉn Kho·∫£n' },
            { id: 8, code: 'HD008', customer: 'ƒêinh Ng·ªçc ƒê·∫°i', date: '2024-09-12', total: 2150000, paid: 2150000, paymentMethod: 'Th·∫ª' },
            { id: 9, code: 'HD009', customer: 'Ng√¥ Minh Nguy·ªát', date: '2024-09-13', total: 3250000, paid: 3250000, paymentMethod: 'Ti·ªÅn M·∫∑t' },
            { id: 10, code: 'HD010', customer: 'Nguy·ªÖn VƒÉn D≈©ng', date: '2024-09-15', total: 6800000, paid: 6800000, paymentMethod: 'Chuy·ªÉn Kho·∫£n' },
            { id: 11, code: 'HD011', customer: 'ƒê·ªó H·ªØu Qu·ªëc Anh', date: '2024-09-17', total: 6700000, paid: 6700000, paymentMethod: 'Th·∫ª' },
            { id: 12, code: 'HD012', customer: 'ƒê·ªó Ti·∫øn ƒê·∫°t', date: '2024-09-18', total: 10500000, paid: 10500000, paymentMethod: 'Chuy·ªÉn Kho·∫£n' },
            { id: 13, code: 'HD013', customer: 'Tr·∫ßn ƒê·ª©c L∆∞·ª£ng', date: '2024-09-19', total: 8850000, paid: 8850000, paymentMethod: 'Ti·ªÅn M·∫∑t' },
            { id: 14, code: 'HD014', customer: 'ƒê√†o Minh Quang', date: '2024-09-20', total: 21200000, paid: 21200000, paymentMethod: 'Chuy·ªÉn Kho·∫£n' },
            { id: 15, code: 'HD015', customer: 'B√πi Tr√≠ D≈©ng', date: '2024-09-22', total: 2350000, paid: 2350000, paymentMethod: 'Th·∫ª' },
            { id: 16, code: 'HD016', customer: 'Nguy·ªÖn M·∫°nh D≈©ng', date: '2024-09-23', total: 3550000, paid: 3550000, paymentMethod: 'Ti·ªÅn M·∫∑t' },
            { id: 17, code: 'HD017', customer: 'Tr·∫ßn Th·∫ø Thi√™n', date: '2024-09-24', total: 4800000, paid: 4800000, paymentMethod: 'Chuy·ªÉn Kho·∫£n' }
        ];

        const invoiceDetails = {
            1: [
                { service: 'Ph√≤ng Standard - 2 ƒë√™m', quantity: 2, price: 800000 },
                { service: 'B·ªØa s√°ng buffet', quantity: 2, price: 250000 },
                { service: 'ƒê∆∞a ƒë√≥n s√¢n bay', quantity: 1, price: 300000 },
                { service: 'WiFi cao t·ªëc', quantity: 2, price: 100000 },
                { service: 'G·ª≠i xe √¥ t√¥', quantity: 2, price: 200000 }
            ],
            2: [
                { service: 'Ph√≤ng Superior - 2 ƒë√™m', quantity: 2, price: 1200000 },
                { service: 'B·ªØa s√°ng buffet', quantity: 4, price: 250000 },
                { service: 'Massage 60 ph√∫t', quantity: 1, price: 800000 },
                { service: 'Ph√≤ng gym', quantity: 2, price: 200000 },
                { service: 'H·ªì b∆°i & jacuzzi', quantity: 2, price: 150000 }
            ]
        };

        function loadInvoices() {
            const tbody = document.getElementById('invoiceList');
            const searchTerm = document.getElementById('searchInvoice').value.toLowerCase();
            const dateFrom = document.getElementById('filterDateFrom').value;
            const dateTo = document.getElementById('filterDateTo').value;

            let filtered = invoices.filter(inv => {
                const matchSearch = inv.code.toLowerCase().includes(searchTerm) || 
                                   inv.customer.toLowerCase().includes(searchTerm);
                const matchDateFrom = !dateFrom || inv.date >= dateFrom;
                const matchDateTo = !dateTo || inv.date <= dateTo;
                return matchSearch && matchDateFrom && matchDateTo;
            });

            tbody.innerHTML = '';
            filtered.forEach(inv => {
                const debt = inv.total - inv.paid;
                const statusBadge = debt === 0 ? 
                    '<span class="badge badge-success">ƒê√£ Thanh To√°n</span>' :
                    '<span class="badge badge-warning">C√≤n N·ª£</span>';

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${inv.code}</strong></td>
                    <td>${inv.customer}</td>
                    <td>${formatDate(inv.date)}</td>
                    <td class="price">${formatMoney(inv.total)}</td>
                    <td>${formatMoney(inv.paid)}</td>
                    <td class="price">${formatMoney(debt)}</td>
                    <td>${inv.paymentMethod}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-info" onclick="viewInvoice(${inv.id})" style="padding: 6px 12px; font-size: 12px;">üëÅÔ∏è Xem</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            document.getElementById('totalInvoices').textContent = invoices.length;
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('vi-VN');
        }

        function formatMoney(amount) {
            return amount.toLocaleString('vi-VN') + ' ‚Ç´';
        }

        function viewInvoice(id) {
            const invoice = invoices.find(inv => inv.id === id);
            if (!invoice) return;

            const debt = invoice.total - invoice.paid;
            document.getElementById('invoiceNumber').textContent = invoice.code;
            document.getElementById('invoiceInfo').innerHTML = `
                <p><strong>Kh√°ch H√†ng:</strong> ${invoice.customer}</p>
                <p><strong>Ng√†y L·∫≠p:</strong> ${formatDate(invoice.date)}</p>
                <p><strong>H√¨nh Th·ª©c Thanh To√°n:</strong> ${invoice.paymentMethod}</p>
                <p><strong>T·ªïng Ti·ªÅn:</strong> <span class="price-large">${formatMoney(invoice.total)}</span></p>
                <p><strong>ƒê√£ Tr·∫£:</strong> <span class="price">${formatMoney(invoice.paid)}</span></p>
                <p><strong>C√≤n N·ª£:</strong> <span class="price">${formatMoney(debt)}</span></p>
            `;

            const details = invoiceDetails[id] || [];
            const tbody = document.getElementById('invoiceDetails');
            tbody.innerHTML = '';
            details.forEach(item => {
                const total = item.quantity * item.price;
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.service}</td>
                    <td>${item.quantity}</td>
                    <td>${formatMoney(item.price)}</td>
                    <td class="price">${formatMoney(total)}</td>
                `;
                tbody.appendChild(row);
            });

            document.getElementById('invoiceModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('invoiceModal').classList.remove('active');
        }

        function printInvoice() {
            alert('üñ®Ô∏è Ch·ª©c nƒÉng in h√≥a ƒë∆°n s·∫Ω ƒë∆∞·ª£c ph√°t tri·ªÉn!');
        }

        // Event listeners
        document.getElementById('searchInvoice').addEventListener('input', loadInvoices);
        document.getElementById('filterDateFrom').addEventListener('change', loadInvoices);
        document.getElementById('filterDateTo').addEventListener('change', loadInvoices);

        // Initialize
        loadInvoices();
    </script>
</body>
</html>