<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω Ph√≤ng - Kh√°ch S·∫°n</title>
    <link rel="stylesheet" href="style.css">
   
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">üè®</div>
                <h1>Qu·∫£n L√Ω Ph√≤ng</h1>
            </div>
        </header>

        <nav>
            <ul class="nav-menu">
                <li><a href="index.html">üìä T·ªïng Quan</a></li>
                <li><a href="phong.html" class="active">üè† Qu·∫£n L√Ω Ph√≤ng</a></li>
                <li><a href="datphong.html">üìÖ ƒê·∫∑t Ph√≤ng</a></li>
                <li><a href="khachhang.html">üë• Kh√°ch H√†ng</a></li>
                <li><a href="hoadon.html">üí∞ H√≥a ƒê∆°n</a></li>
                <li><a href="dichvu.html">üõéÔ∏è D·ªãch V·ª•</a></li>
                <li><a href="baocao.html">üìà B√°o C√°o</a></li>
            </ul>
        </nav>

        <div class="content">
            <div class="toolbar">
                <div class="search-bar">
                    <input type="text" id="searchRoom" placeholder="üîç T√¨m ki·∫øm s·ªë ph√≤ng...">
                    <select id="filterType">
                        <option value="">T·∫•t c·∫£ lo·∫°i ph√≤ng</option>
                        <option value="STD">Standard</option>
                        <option value="SUP">Superior</option>
                        <option value="DEL">Deluxe</option>
                        <option value="JR-SUI">Junior Suite</option>
                        <option value="EXE-SUI">Executive Suite</option>
                        <option value="FAM">Family Room</option>
                        <option value="PRES">Presidential Suite</option>
                    </select>
                    <select id="filterStatus">
                        <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                        <option value="SanSang">S·∫µn S√†ng</option>
                        <option value="BaoTri">B·∫£o Tr√¨</option>
                        <option value="DonDep">D·ªçn D·∫πp</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="openAddModal()">+ Th√™m Ph√≤ng</button>
            </div>

            <div class="stats">
                <div class="stat-box available">
                    <h4>Ph√≤ng S·∫µn S√†ng</h4>
                    <div class="number" id="countAvailable">40</div>
                </div>
                <div class="stat-box maintenance">
                    <h4>Ph√≤ng B·∫£o Tr√¨</h4>
                    <div class="number" id="countMaintenance">4</div>
                </div>
                <div class="stat-box cleaning">
                    <h4>Ph√≤ng D·ªçn D·∫πp</h4>
                    <div class="number" id="countCleaning">3</div>
                </div>
            </div>

            <div class="room-grid" id="roomGrid">
                <!-- Rooms will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Modal Th√™m/S·ª≠a Ph√≤ng -->
    <div id="roomModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Th√™m Ph√≤ng M·ªõi</h2>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            <form id="roomForm">
                <div class="form-group">
                    <label>S·ªë Ph√≤ng <span class="required">*</span></label>
                    <input type="text" id="roomNumber" required placeholder="Nh·∫≠p s·ªë ph√≤ng (VD: 101, 202...)">
                </div>
                <div class="form-group">
                    <label>Lo·∫°i Ph√≤ng <span class="required">*</span></label>
                    <select id="roomType" required>
                        <option value="">-- Ch·ªçn lo·∫°i ph√≤ng --</option>
                        <option value="STD">Standard (2 kh√°ch)</option>
                        <option value="SUP">Superior (2 kh√°ch)</option>
                        <option value="DEL">Deluxe (3 kh√°ch)</option>
                        <option value="JR-SUI">Junior Suite (4 kh√°ch)</option>
                        <option value="EXE-SUI">Executive Suite (4 kh√°ch)</option>
                        <option value="FAM">Family Room (6 kh√°ch)</option>
                        <option value="PRES">Presidential Suite (8 kh√°ch)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>T√¨nh Tr·∫°ng <span class="required">*</span></label>
                    <select id="roomStatus" required>
                        <option value="SanSang">S·∫µn S√†ng</option>
                        <option value="BaoTri">B·∫£o Tr√¨</option>
                        <option value="DonDep">D·ªçn D·∫πp</option>
                    </select>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 25px;">
                    <button type="submit" class="btn btn-primary">üíæ L∆∞u</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">‚úñ H·ªßy</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Chi Ti·∫øt Ph√≤ng -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Chi Ti·∫øt Ph√≤ng <span id="detailRoomNumber"></span></h2>
                <span class="close-btn" onclick="closeDetailModal()">&times;</span>
            </div>
            <div id="roomDetail">
                <!-- Detail content -->
            </div>
            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button class="btn btn-success" onclick="editRoom()">‚úèÔ∏è S·ª≠a</button>
                <button class="btn btn-warning" onclick="changeStatus()">üîÑ ƒê·ªïi Tr·∫°ng Th√°i</button>
                <button class="btn btn-danger" onclick="deleteRoom()">üóëÔ∏è X√≥a</button>
                <button class="btn btn-secondary" onclick="closeDetailModal()">‚úñ ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu m·∫´u
        const roomTypes = {
            'STD': { name: 'Standard', maxGuests: 2, price: 850000 },
            'SUP': { name: 'Superior', maxGuests: 2, price: 1300000 },
            'DEL': { name: 'Deluxe', maxGuests: 3, price: 1950000 },
            'JR-SUI': { name: 'Junior Suite', maxGuests: 4, price: 2700000 },
            'EXE-SUI': { name: 'Executive Suite', maxGuests: 4, price: 3800000 },
            'FAM': { name: 'Family Room', maxGuests: 6, price: 3000000 },
            'PRES': { name: 'Presidential Suite', maxGuests: 8, price: 8500000 }
        };

        let rooms = [
            { id: 1, number: '101', type: 'STD', status: 'SanSang' },
            { id: 2, number: '102', type: 'STD', status: 'SanSang' },
            { id: 3, number: '103', type: 'STD', status: 'DonDep' },
            { id: 4, number: '104', type: 'STD', status: 'SanSang' },
            { id: 5, number: '105', type: 'STD', status: 'SanSang' },
            { id: 6, number: '106', type: 'STD', status: 'SanSang' },
            { id: 7, number: '107', type: 'STD', status: 'BaoTri' },
            { id: 8, number: '108', type: 'STD', status: 'SanSang' },
            { id: 9, number: '109', type: 'STD', status: 'SanSang' },
            { id: 10, number: '110', type: 'STD', status: 'SanSang' },
            { id: 11, number: '201', type: 'SUP', status: 'SanSang' },
            { id: 12, number: '202', type: 'SUP', status: 'SanSang' },
            { id: 13, number: '203', type: 'SUP', status: 'SanSang' },
            { id: 14, number: '204', type: 'SUP', status: 'DonDep' },
            { id: 15, number: '205', type: 'SUP', status: 'SanSang' },
            { id: 16, number: '301', type: 'DEL', status: 'SanSang' },
            { id: 17, number: '302', type: 'DEL', status: 'SanSang' },
            { id: 18, number: '303', type: 'DEL', status: 'SanSang' },
            { id: 19, number: '304', type: 'DEL', status: 'SanSang' },
            { id: 20, number: '305', type: 'DEL', status: 'DonDep' },
            { id: 21, number: '401', type: 'JR-SUI', status: 'SanSang' },
            { id: 22, number: '402', type: 'JR-SUI', status: 'SanSang' },
            { id: 23, number: '403', type: 'JR-SUI', status: 'SanSang' },
            { id: 24, number: '501', type: 'EXE-SUI', status: 'SanSang' },
            { id: 25, number: '502', type: 'EXE-SUI', status: 'BaoTri' },
            { id: 26, number: '601', type: 'FAM', status: 'SanSang' },
            { id: 27, number: '602', type: 'FAM', status: 'SanSang' },
            { id: 28, number: '701', type: 'PRES', status: 'SanSang' }
        ];

        let currentRoomId = null;

        function loadRooms() {
            const grid = document.getElementById('roomGrid');
            const searchTerm = document.getElementById('searchRoom').value.toLowerCase();
            const filterType = document.getElementById('filterType').value;
            const filterStatus = document.getElementById('filterStatus').value;

            let filteredRooms = rooms.filter(room => {
                const matchSearch = room.number.toLowerCase().includes(searchTerm);
                const matchType = !filterType || room.type === filterType;
                const matchStatus = !filterStatus || room.status === filterStatus;
                return matchSearch && matchType && matchStatus;
            });

            grid.innerHTML = '';
            filteredRooms.forEach(room => {
                const type = roomTypes[room.type];
                const statusClass = room.status === 'SanSang' ? 'available' : 
                                   room.status === 'BaoTri' ? 'maintenance' : 'cleaning';
                const statusText = room.status === 'SanSang' ? 'S·∫µn S√†ng' : 
                                  room.status === 'BaoTri' ? 'B·∫£o Tr√¨' : 'D·ªçn D·∫πp';

                const card = document.createElement('div');
                card.className = `room-card ${statusClass}`;
                card.onclick = () => showRoomDetail(room.id);
                card.innerHTML = `
                    <div class="room-number">${room.number}</div>
                    <div class="room-type">${type.name}</div>
                    <div class="room-type">üë§ ${type.maxGuests} kh√°ch</div>
                    <div class="room-status ${statusClass}">${statusText}</div>
                `;
                grid.appendChild(card);
            });

            updateStats();
        }

        function updateStats() {
            const available = rooms.filter(r => r.status === 'SanSang').length;
            const maintenance = rooms.filter(r => r.status === 'BaoTri').length;
            const cleaning = rooms.filter(r => r.status === 'DonDep').length;

            document.getElementById('countAvailable').textContent = available;
            document.getElementById('countMaintenance').textContent = maintenance;
            document.getElementById('countCleaning').textContent = cleaning;
        }

        function openAddModal() {
            document.getElementById('modalTitle').textContent = 'Th√™m Ph√≤ng M·ªõi';
            document.getElementById('roomForm').reset();
            currentRoomId = null;
            document.getElementById('roomModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('roomModal').classList.remove('active');
        }

        function closeDetailModal() {
            document.getElementById('detailModal').classList.remove('active');
        }

        function showRoomDetail(id) {
            const room = rooms.find(r => r.id === id);
            if (!room) return;

            currentRoomId = id;
            const type = roomTypes[room.type];
            const statusText = room.status === 'SanSang' ? 'S·∫µn S√†ng' : 
                              room.status === 'BaoTri' ? 'B·∫£o Tr√¨' : 'D·ªçn D·∫πp';
            const statusClass = room.status === 'SanSang' ? 'available' : 
                               room.status === 'BaoTri' ? 'maintenance' : 'cleaning';

            document.getElementById('detailRoomNumber').textContent = room.number;
            document.getElementById('roomDetail').innerHTML = `
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <p style="margin-bottom: 15px;"><strong>Lo·∫°i Ph√≤ng:</strong> ${type.name}</p>
                    <p style="margin-bottom: 15px;"><strong>S·ªë Kh√°ch T·ªëi ƒêa:</strong> ${type.maxGuests} ng∆∞·ªùi</p>
                    <p style="margin-bottom: 15px;"><strong>Gi√° Ph√≤ng:</strong> ${type.price.toLocaleString('vi-VN')} ‚Ç´/ƒë√™m</p>
                    <p style="margin-bottom: 15px;"><strong>T√¨nh Tr·∫°ng:</strong> 
                        <span class="room-status ${statusClass}">${statusText}</span>
                    </p>
                </div>
            `;
            document.getElementById('detailModal').classList.add('active');
        }

        function editRoom() {
            const room = rooms.find(r => r.id === currentRoomId);
            if (!room) return;

            closeDetailModal();
            document.getElementById('modalTitle').textContent = 'S·ª≠a Th√¥ng Tin Ph√≤ng';
            document.getElementById('roomNumber').value = room.number;
            document.getElementById('roomType').value = room.type;
            document.getElementById('roomStatus').value = room.status;
            document.getElementById('roomModal').classList.add('active');
        }

        function changeStatus() {
            const room = rooms.find(r => r.id === currentRoomId);
            if (!room) return;

            const statuses = ['SanSang', 'BaoTri', 'DonDep'];
            const currentIndex = statuses.indexOf(room.status);
            room.status = statuses[(currentIndex + 1) % statuses.length];

            closeDetailModal();
            loadRooms();
            alert('‚úÖ ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i ph√≤ng!');
        }

        function deleteRoom() {
            if (!confirm('‚ö†Ô∏è B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ph√≤ng n√†y?')) return;

            rooms = rooms.filter(r => r.id !== currentRoomId);
            closeDetailModal();
            loadRooms();
            alert('‚úÖ ƒê√£ x√≥a ph√≤ng th√†nh c√¥ng!');
        }

        document.getElementById('roomForm').onsubmit = function(e) {
            e.preventDefault();

            const number = document.getElementById('roomNumber').value;
            const type = document.getElementById('roomType').value;
            const status = document.getElementById('roomStatus').value;

            if (currentRoomId) {
                // S·ª≠a ph√≤ng
                const room = rooms.find(r => r.id === currentRoomId);
                if (room) {
                    room.number = number;
                    room.type = type;
                    room.status = status;
                    alert('‚úÖ C·∫≠p nh·∫≠t ph√≤ng th√†nh c√¥ng!');
                }
            } else {
                // Th√™m ph√≤ng m·ªõi
                const newRoom = {
                    id: Math.max(...rooms.map(r => r.id)) + 1,
                    number: number,
                    type: type,
                    status: status
                };
                rooms.push(newRoom);
                alert('‚úÖ Th√™m ph√≤ng m·ªõi th√†nh c√¥ng!');
            }

            closeModal();
            loadRooms();
        };

        // Event listeners
        document.getElementById('searchRoom').addEventListener('input', loadRooms);
        document.getElementById('filterType').addEventListener('change', loadRooms);
        document.getElementById('filterStatus').addEventListener('change', loadRooms);

        // Load initial data
        loadRooms();
    </script>
</body>
</html>